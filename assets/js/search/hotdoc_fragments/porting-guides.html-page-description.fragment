fragment_downloaded_cb({"fragment": "Build the library with gtk doc enabled \nCreating a basic hotdoc project from the output of gtk doc s build process. \nCompleting the discovered C flags and include directories and adding pkgconfig packages the lib depends upon \nFor this example the gcr sources have to be available and it needs to build successfully in the environment with gtk doc enabled \nThis next part relies on some arguably fragile parsing of the output of make in the gtk doc folder assuming an autotools based project. If the project isn t built with the autotools or for some reason the parsing script fails you will need to provide the files detailed at the end of this subsection. In case of a script failure don t hesitate to open an issue against the gi extension. \nAdditionally we will need to provide the path to the gir file of the documented library. \nThe command to run is the following \nAdapted to cgr this results in \nOnce this was run successfully we end up with the following \nA hotdoc.json configuration file containing the following \nIn our example the contents of hotdoc.json look like \nA markdown index in markdown_files index.markdown containing the following \nIn our example the previous script successully listed the sources and discovered some include directories and extra c flags. \nWe can already check how clang likes our current project with \nNot much it seems a lot of warnings are output in the terminal we ll start with the most prominent ones \nClassic problem where gtk doc didn t care much about preprocessor macros clang does care and cgr is a project where only cgr.h is intended for external direct inclusion. A quick look at the sources and at the gir rules shows we need to def and undef a few macros \nThe next warning we ll look at is \nThis has to be fixed by adding a pkg_config_packages subsection in the configuration file and listing gtk inside it \nGoing ahead we ve got a bunch of less obvious issues in various source files. This might be due to these header files not being intended for direct inclusion and if so there must be a main header file which might not be listed first in the sources. This is the case in our example lets s fix that \nIn the case of gcr it didn t seem to fix many issues but this will speed up clang scanning times and should be done anyway. \nThe final set of issues is due to missing includes in the header files as they are not meant for direct inclusion this is not a defect strictly speaking but it doesn t hurt to fix this anyway as a bonus it also makes other clang based tools such as YouCompleteMe happier. \nExample issue \nand example fix in gcr system prompt.h \nThe rest of the warnings are fixed in a similar fashion until none is left. \n", "url": "porting-guides.html#page-description"});